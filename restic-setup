#!/bin/bash

RESTIC_PASSWORD_FILE=~/.resticpw
export RESTIC_PASSWORD_FILE

case "$1" in
	"local")
		RESTIC_REPOSITORY=sftp:`whoami`@raspberrypi2:Backup/`hostname`
		export RESTIC_REPOSITORY
	;;
	"onedrive")
		RESTIC_REPOSITORY=rclone:onedrive:backup/`hostname`
		export RESTIC_REPOSITORY
	;;
	*)
		echo "usage: $0 local | onecrive"
	;;
esac
restic generate --bash-completion ~/.bash_completion
source ~/.bash_completion
